<html>
<head>
	<script src = "/libs/jquery-3.4.1.min.js" type = "text/javascript"> </script>
	<script src = "/libs/bootstrap/bootstrap.min.js" type = "text/javascript"> </script>
	<script src = "/libs/cancelLib.js" type = "text/javascript"> </script>
	<link rel="stylesheet" media = "all" type="text/css" href="/css/reservation.css">
	<link rel="stylesheet" media = "all" type="text/css" href="/css/view.css">
	<link rel="stylesheet" media = "all" type="text/css" href="/css/bootstrap/bootstrap.min.css">
</head>
<body>
	{{>navbar reservationPage=true}}


	{{#canUserCancel cancel}}
		{{else}}
		<div id = "errorSpace">
			<div id = "errorMsg">
				<h2> You have exceeded your maximum number of cancellations (2 cancellations per day) </h2>
			</div>
		</div>
	{{/canUserCancel}}


<table>
	<tr>
		<th> Reservation ID </th>
		<th> Location Name </th>
		<th> Date </th>
		<th> Status </th>
	</tr>
	{{#each reservations}}
		<tr>
			<td> {{_id}} </td>
			{{#with space}}
				<td> <a href = "http://localhost:9090/space/{{_id}}"> {{locationName}} </a> </td>
			{{/with}}
			<td> {{formatDate date}} </td>
			<td> {{status}} </td>
			{{#canUserCancel @root.cancel}}
				{{#canReserveCancel status}}
				<td> <input type = "Button" value = "Cancel" class = "cancel" id = "{{_id}}"></input> </td>
				{{/canReserveCancel}}
			{{/canUserCancel}}
		</tr>
	{{/each}}
</table>

{{#canUserCancel cancel}}
	<script>
		loadCancelBtn();
	</script>
{{/canUserCancel}}

</body>
</html>
		
